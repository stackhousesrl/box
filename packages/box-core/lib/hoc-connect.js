"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _react=_interopRequireWildcard(require("react"));var _reactRedux=require("react-redux");var _context=require("./context");var _default=function _default(makeMapStateToProps){return function(WrappedComponent){return function(props){var context=(0,_react.useContext)(_context.BoxContext);var ConnectedComponent=(0,_react.useMemo)(function(){return context.state?WrappedComponent:(0,_reactRedux.connect)(makeMapStateToProps,null,null,{forwardRef:true})(WrappedComponent)},[]);if(context.state){var newProps=(0,_react.useMemo)(function(){return makeMapStateToProps(context.state,props)},[context.state,props]);return _react["default"].createElement(ConnectedComponent,(0,_extends2["default"])({},props,newProps,{dispatch:context.dispatch}))}return _react["default"].createElement(ConnectedComponent,props)}}};exports["default"]=_default;